window.FlashExternalInterface || (window.FlashExternalInterface = {}); var games = []; window.FlashExternalInterface.legacyTrack = function(a, b) { a && b && "navigator" === a && "private" === b && games.forEach(function(c) { return c.remove() }) }; var createHabboContainer = function(a, b) { var c = document.createElement("div"); c.classList.add("habbo-container"); var d = document.createElement("div"); d.classList.add("habbo-container-header"); d.innerHTML = a; var e = document.createElement("div"); e.classList.add("habbo-container-close"); e.addEventListener("click", function() { c.remove() }); d.appendChild(e); var f = !1, h = 0, k = 0; d.addEventListener("mousedown", function(a) { a.target !== e && (f = !0, h = a.clientY - parseInt(c.offsetTop), k = a.clientX - parseInt(c.offsetLeft)) }); window.addEventListener("mouseup", function() { f = !1 }); window.addEventListener("mousemove", function(a) { f && (c.style.top = a.clientY - h + "px", c.style.left = a.clientX - k + "px") }); var g = document.createElement("div"); g.classList.add("habbo-container-content"); g.appendChild(b); c.appendChild(d); c.appendChild(g); document.body.appendChild(c); games.push(c); return c }; window.FlashExternalGameInterface = {}; var returnButton = document.getElementsByClassName("return")[0], original = FlashExternalGameInterface.showGame; FlashExternalGameInterface.showGame = function(a) { original && original.apply(this, [a]); var b = document.createElement("iframe"); if (a.startsWith("battleships://")) { b.src = a.replace(/^battleships:\/\//, ""); b.style.width = "262px"; b.style.height = "269px"; b.style.border = "0"; var c = createHabboContainer("Battleships", b); window.addEventListener("message", function(b) { "string" === typeof b.data && b.data.startsWith(a.split("#")[1]) && "destroy" === b.data.substr(a.split("#")[1].length) && c.remove() }) } else b.classList.add("customClientComponentFrame"), b.src = a, document.body.appendChild(b), returnButton.style.display = "inline-block" }; returnButton.addEventListener("click", function() { returnButton.style.display = "none"; Array.from(document.getElementsByClassName("customClientComponentFrame")).forEach(function(a) { a.remove() }) }); ! function() { var i = document.createElement("style"); i.innerHTML = ".minimail{color:#000}.minimail .minimail-chat{cursor:pointer;display:flex}.minimail .minimail-chat .minimail-chat-user{flex-shrink:0}.minimail .minimail-chat .minimail-chat-info{flex-grow:1}.minimail .minimail-chat .minimail-chat-info .minimail-chat-info-title{font-size:15pt;font-weight:700}.minimail .minimail-chat .minimail-chat-info .minimail-chat-info-started{font-size:8pt}.minimail .minimail-chat .minimail-chat-info .minimail-chat-info-participants{font-size:10pt}", document.head.appendChild(i); var n = document.createElement("style"); n.innerHTML = ".news::-webkit-scrollbar{width:10px}.news::-webkit-scrollbar-track{background:#f1f1f1}.news::-webkit-scrollbar-thumb{background:#888}.news::-webkit-scrollbar-thumb:hover{background:#555}.news{overflow-y:scroll;max-height:550px;color:#000;padding-right:10px}.news .news-entry{cursor:pointer;background:#fff;padding:8px;border-radius:4px;border:1px solid #ababab;margin-bottom:10px}.news .news-entry .news-entry-info .news-entry-info-title{font-size:15pt;font-weight:700}.news .news-entry .news-entry-info .news-entry-info-created{font-size:8pt}.news .news-entry .news-entry-info .news-entry-info-description{font-size:10pt}", document.head.appendChild(n), window.FlashExternalInterface.openMinimail = function(i) { "#mail/inbox/" === i ? $.get("https://nextgenhabbo.com/messages").done(function(i) { var n = $('<div class="minimail"></div>'); $(i).find(".minimail ul li").each(function() { var i = $(this), e = $('<div class="minimail-chat"><div class="minimail-chat-user"><img src="' + i.find("img").attr("src") + '"></div><div class="minimail-chat-info"><div class="minimail-chat-info-title">' + i.find("b")[0].childNodes[0].nodeValue + '</div><div class="minimail-chat-info-started">' + i.find("b div").text() + '</div><div class="minimail-chat-info-participants">' + i.find("small").text() + "</div></div></div>"); e.on("click", function() { window.open(i.attr("onclick").match(/location\.href='([^']+)';/)[1], "_blank") }), n.append(e) }), createHabboContainer("Minimail", n[0]) }) : i.startsWith("#mail/compose/") && console.log("unable to compose message") }, window.FlashExternalInterface.openNews = function() { $.get("https://nextgenhabbo.com/api/witness/news").done(function(i) { var n = $('<div class="news"></div>'); i.forEach(function(i) { var e = $('<div class="news-entry"><div class="news-entry-info"><div class="news-entry-info-title">' + i.title + '</div><div class="news-entry-info-created">' + i.updated_at + '</div><div class="news-entry-info-description">' + $(i.description).text() + "</div></div></div>"); e.on("click", function() { window.open("https://nextgenhabbo.com/community/news/" + i.id, "_blank") }), n.append(e) }), createHabboContainer("News", n[0]) }) } }();
